{"ast":null,"code":"var buildUrl = require('../utils/build_url');\n\nvar _require = require('../utils/utils'),\n    forceArray = _require.forceArray;\n\nmodule.exports = function (ids) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  ids = forceArray(ids);\n  var uniqueId = ids.length === 1;\n  var query = {\n    action: 'query',\n    prop: 'revisions'\n  };\n  query.titles = ids.join('|');\n  query.format = options.format || 'json';\n  if (uniqueId) query.rvlimit = options.limit || 'max';\n  if (uniqueId && options.start) query.rvstart = getEpochSeconds(options.start);\n  if (uniqueId && options.end) query.rvend = getEpochSeconds(options.end);\n  return buildUrl(query);\n};\n\nvar getEpochSeconds = function getEpochSeconds(date) {\n  // Return already formatted epoch seconds:\n  // if a date in milliseconds appear to be earlier than 2000-01-01, that's probably\n  // already seconds actually\n  if (typeof date === 'number' && date < earliestPointInMs) return date;\n  return Math.trunc(new Date(date).getTime() / 1000);\n};\n\nvar earliestPointInMs = new Date('2000-01-01').getTime();","map":null,"metadata":{},"sourceType":"script"}