{"ast":null,"code":"import _classCallCheck from \"/Users/tallrye/React/swe573/wlearn-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tallrye/React/swe573/wlearn-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tallrye/React/swe573/wlearn-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tallrye/React/swe573/wlearn-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/tallrye/React/swe573/wlearn-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/tallrye/React/swe573/wlearn-react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/tallrye/React/swe573/wlearn-react/src/topic/CreateTopic.js\";\nimport React, { Component } from 'react';\nimport Form from \"react-bootstrap/Form\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport { createTopic } from '../util/APIUtils';\nimport { withRouter } from 'react-router-dom';\nimport toast from \"toasted-notes\";\nimport wdk from \"wikidata-sdk\";\nimport axios from \"axios\";\nimport { Badge, Row } from \"react-bootstrap\";\n\nvar CreateTopic =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateTopic, _Component);\n\n  function CreateTopic(props) {\n    var _this;\n\n    _classCallCheck(this, CreateTopic);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateTopic).call(this, props));\n    _this.timer = null;\n    _this.state = {\n      title: '',\n      description: '',\n      wikiDataSearch: [],\n      wikiData: []\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleTitleChange = _this.handleTitleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDescriptionChange = _this.handleDescriptionChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleKeywordChange = _this.handleKeywordChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSelect = _this.handleSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CreateTopic, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var newTopic = {\n        title: this.state.title,\n        description: this.state.description,\n        wikiData: this.state.wikiData\n      };\n      createTopic(newTopic).then(function (response) {\n        toast.notify(\"Topic created successfully.\", {\n          position: \"bottom-right\"\n        });\n\n        _this2.props.history.push(\"/\".concat(_this2.props.currentUser.username, \"/topics/created\"));\n      }).catch(function (error) {\n        if (error.status === 401) {\n          _this2.props.handleLogout();\n        } else {\n          toast.notify('Sorry! Something went wrong. Please try again!', {\n            position: \"bottom-right\"\n          });\n        }\n      });\n    }\n  }, {\n    key: \"handleTitleChange\",\n    value: function handleTitleChange(event) {\n      var value = event.target.value;\n      this.setState({\n        title: value\n      });\n    }\n  }, {\n    key: \"handleDescriptionChange\",\n    value: function handleDescriptionChange(event) {\n      var value = event.target.value;\n      this.setState({\n        description: value\n      });\n    }\n  }, {\n    key: \"handleKeywordChange\",\n    value: function handleKeywordChange(event) {\n      var _this3 = this;\n\n      clearTimeout(this.timer);\n      var value = event.target.value;\n\n      if (value !== '') {\n        this.timer = setTimeout(function () {\n          var url = wdk.searchEntities(value, 'en', 5, 'json');\n          axios.get(url).then(function (response) {\n            if (response.data.search.length > 0) {\n              _this3.setState({\n                wikiDataSearch: response.data.search\n              });\n\n              toast.notify(\"Found in WikiData!\", {\n                position: \"bottom-right\"\n              });\n            } else {\n              toast.notify(\"Keyword can not found!\", {\n                position: \"bottom-right\"\n              });\n            }\n          });\n        }, 1000);\n      } else {\n        this.setState({\n          wikiDataSearch: []\n        });\n      }\n    }\n  }, {\n    key: \"handleSelect\",\n    value: function handleSelect(event) {\n      var wikiData = this.state.wikiData.slice();\n      this.setState({\n        wikiData: wikiData.concat(event.target.value)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var wikidatas = this.state.wikiDataSearch;\n      var wikidataResultList = wikidatas.map(function (wiki, wikiIndex) {\n        return (// if the description is empty, empty row seen, try domates\n          React.createElement(Row, {\n            key: wikiIndex,\n            className: \"border border-info p-1 m-1 text-left\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          }, wiki.description && React.createElement(React.Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100\n            },\n            __self: this\n          }, React.createElement(Col, {\n            md: \"1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            },\n            __self: this\n          }, React.createElement(Form.Check, {\n            onChange: _this4.handleSelect,\n            type: \"checkbox\",\n            id: \"default-checkbox\",\n            value: wiki.concepturi,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            },\n            __self: this\n          })), React.createElement(Col, {\n            md: \"9\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }, React.createElement(Badge, {\n            variant: \"secondary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }, \"Description: \"), \" \", wiki.description), React.createElement(Col, {\n            md: \"2\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          }, React.createElement(Badge, {\n            variant: \"secondary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          }, \"Url: \"), \" \", React.createElement(\"a\", {\n            href: wiki.concepturi,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          }, \"WikiData Page\"))))\n        );\n      });\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pageHeader text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Create a topic\")))), React.createElement(\"div\", {\n        className: \"sectionPadding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container w-90 text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        style: {\n          fontSize: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Things to \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Consider\")), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        style: {\n          fontSize: '14px',\n          textAlign: 'justify'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Neque ipsam ut consectetur vel excepturi alias laboriosam totam fuga reprehenderit officiis, sed aliquam accusamus repellat laborum! Fuga cupiditate porro exercitationem quod.\")), React.createElement(\"div\", {\n        className: \"col-md-8 offset-md-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        className: \"row\",\n        controlId: \"formPlaintextUsernameOrEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        column: true,\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Title\"), React.createElement(Col, {\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Topic Title\",\n        onChange: this.handleTitleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }))), React.createElement(Form.Group, {\n        className: \"row\",\n        controlId: \"formPlaintextPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        column: true,\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Description\"), React.createElement(Col, {\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        as: \"textarea\",\n        rows: \"5\",\n        placeholder: \"Short Description\",\n        onChange: this.handleDescriptionChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }))), React.createElement(Form.Group, {\n        className: \"row\",\n        controlId: \"formPlaintextPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        column: true,\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Keyword\"), React.createElement(Col, {\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Wiki Keywords\",\n        onChange: this.handleKeywordChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }))), wikidataResultList, React.createElement(Button, {\n        className: \"mt-4\",\n        variant: \"success\",\n        type: \"submit\",\n        block: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Create Topic\")))))));\n    }\n  }]);\n\n  return CreateTopic;\n}(Component);\n\nexport default withRouter(CreateTopic);","map":{"version":3,"sources":["/Users/tallrye/React/swe573/wlearn-react/src/topic/CreateTopic.js"],"names":["React","Component","Form","Col","Button","createTopic","withRouter","toast","wdk","axios","Badge","Row","CreateTopic","props","timer","state","title","description","wikiDataSearch","wikiData","handleSubmit","bind","handleTitleChange","handleDescriptionChange","handleKeywordChange","handleSelect","event","preventDefault","newTopic","then","response","notify","position","history","push","currentUser","username","catch","error","status","handleLogout","value","target","setState","clearTimeout","setTimeout","url","searchEntities","get","data","search","length","slice","concat","wikidatas","wikidataResultList","map","wiki","wikiIndex","concepturi","fontSize","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Form from \"react-bootstrap/Form\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport { createTopic } from '../util/APIUtils';\nimport { withRouter } from 'react-router-dom';\nimport toast from \"toasted-notes\";\nimport wdk from \"wikidata-sdk\";\nimport axios from \"axios\";\nimport { Badge, Row } from \"react-bootstrap\";\n\nclass CreateTopic extends Component {\n    constructor(props) {\n        super(props);\n        this.timer = null;\n        this.state = {\n            title: '',\n            description: '',\n            wikiDataSearch: [],\n            wikiData: []\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleTitleChange = this.handleTitleChange.bind(this);\n        this.handleDescriptionChange = this.handleDescriptionChange.bind(this);\n        this.handleKeywordChange = this.handleKeywordChange.bind(this);\n        this.handleSelect = this.handleSelect.bind(this);\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();\n\n        const newTopic = {\n            title: this.state.title,\n            description: this.state.description,\n            wikiData: this.state.wikiData\n        };\n\n        createTopic(newTopic)\n            .then(response => {\n                toast.notify(\"Topic created successfully.\", { position: \"bottom-right\" });\n                this.props.history.push(`/${this.props.currentUser.username}/topics/created`);\n            }).catch(error => {\n                if (error.status === 401) {\n                    this.props.handleLogout();\n                } else {\n                    toast.notify('Sorry! Something went wrong. Please try again!', { position: \"bottom-right\" });\n                }\n            });\n\n    }\n\n\n\n    handleTitleChange(event) {\n        const value = event.target.value;\n        this.setState({ title: value })\n    }\n\n    handleDescriptionChange(event) {\n        const value = event.target.value;\n        this.setState({ description: value })\n    }\n\n    handleKeywordChange(event) {\n        clearTimeout(this.timer);\n\n        const value = event.target.value;\n        if (value !== '') {\n            this.timer = setTimeout(() => {\n                const url = wdk.searchEntities(value, 'en', 5, 'json');\n                axios.get(url)\n                    .then(response => {\n                        if (response.data.search.length > 0) {\n                            this.setState({ wikiDataSearch: response.data.search })\n                            toast.notify(\"Found in WikiData!\", { position: \"bottom-right\" })\n                        } else {\n                            toast.notify(\"Keyword can not found!\", { position: \"bottom-right\" });\n                        }\n                    })\n            }, 1000)\n        } else {\n            this.setState({ wikiDataSearch: [] })\n        }\n    }\n\n    handleSelect(event) {\n        const wikiData = this.state.wikiData.slice();\n        this.setState({\n            wikiData: wikiData.concat(event.target.value)\n        });\n    }\n\n    render() {\n        const wikidatas = this.state.wikiDataSearch;\n        const wikidataResultList = wikidatas.map((wiki, wikiIndex) => {\n            return (\n                // if the description is empty, empty row seen, try domates\n                <Row key={wikiIndex} className=\"border border-info p-1 m-1 text-left\">\n                    {wiki.description && (\n                        <React.Fragment>\n                            <Col md=\"1\"><Form.Check onChange={this.handleSelect}\n                                type=\"checkbox\"\n                                id=\"default-checkbox\"\n                                value={wiki.concepturi}\n                            /></Col>\n                            <Col md=\"9\"><Badge variant=\"secondary\">Description: </Badge> {wiki.description}</Col>\n                            <Col md=\"2\"><Badge variant=\"secondary\">Url: </Badge> <a href={wiki.concepturi} target=\"_blank\" rel=\"noopener noreferrer\">WikiData Page</a></Col>\n                        </React.Fragment>\n                    )}\n                </Row>\n            )\n        });\n\n        return (\n            <React.Fragment>\n                <div className=\"pageHeader text-left\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div className=\"col-md-12\">\n                                Create a topic\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"sectionPadding\">\n                    <div className=\"container w-90 text-left\">\n                        <div className=\"row\">\n                            <div className=\"col-md-3\">\n                                <h4 style={{ fontSize: '20px' }}>Things to <strong>Consider</strong></h4>\n                                <hr />\n                                <p style={{ fontSize: '14px', textAlign: 'justify' }}>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Neque ipsam ut consectetur vel excepturi alias laboriosam totam\n                        fuga reprehenderit officiis, sed aliquam accusamus repellat laborum! Fuga cupiditate porro exercitationem quod.</p>\n                            </div>\n                            <div className=\"col-md-8 offset-md-1\">\n                                <Form onSubmit={this.handleSubmit}>\n                                    <Form.Group className=\"row\" controlId=\"formPlaintextUsernameOrEmail\">\n                                        <Form.Label column sm=\"12\">\n                                            Title\n                                        </Form.Label>\n                                        <Col sm=\"12\">\n                                            <Form.Control\n                                                type=\"text\"\n                                                placeholder=\"Topic Title\"\n                                                onChange={this.handleTitleChange}\n                                            />\n                                        </Col>\n                                    </Form.Group>\n\n                                    <Form.Group className=\"row\" controlId=\"formPlaintextPassword\" >\n                                        <Form.Label column sm=\"12\">\n                                            Description\n                                        </Form.Label>\n                                        <Col sm=\"12\">\n                                            <Form.Control\n                                                as=\"textarea\"\n                                                rows=\"5\"\n                                                placeholder=\"Short Description\"\n                                                onChange={this.handleDescriptionChange}\n                                            />\n                                        </Col>\n                                    </Form.Group>\n\n                                    <Form.Group className=\"row\" controlId=\"formPlaintextPassword\" >\n                                        <Form.Label column sm=\"12\">\n                                            Keyword\n                                        </Form.Label>\n                                        <Col sm=\"12\">\n                                            <Form.Control\n                                                type=\"text\"\n                                                placeholder=\"Wiki Keywords\"\n                                                onChange={this.handleKeywordChange}\n                                            />\n                                        </Col>\n                                    </Form.Group>\n\n                                    {wikidataResultList}\n\n                                    <Button className=\"mt-4\" variant=\"success\" type=\"submit\" block>\n                                        Create Topic\n                                    </Button>\n                                </Form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </React.Fragment>\n        );\n    }\n}\n\nexport default withRouter(CreateTopic);"]},"metadata":{},"sourceType":"module"}